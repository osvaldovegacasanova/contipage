---
import Layout from "../../layouts/Layout.astro";
import Container from "../../components/shared/Container.astro";
import Title2 from "../../components/shared/Title2.astro";
import Paragraph from "../../components/shared/Paragraph.astro";
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort((a, b) => +new Date(b.data.pubDate) - +new Date(a.data.pubDate));
---

<Layout title="Blog">
  <section class="pt-28 md:pt-32">
    <Container size="wide">
      <div class="text-center max-w-2xl mx-auto">
        <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-heading-1">Blog</h1>
        <Paragraph className="mt-3 text-heading-3">Noticias, guías y artículos técnicos sobre sopladores y compresores centrífugos.</Paragraph>
      </div>
    </Container>
  </section>

  <section class="py-10 md:py-16">
    <Container>
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {posts.map(({ id, data, slug }) => (
          <a href={`/blog/${slug}/`} class="group block rounded-2xl border border-box-border hover:border-primary transition p-5 bg-box-bg">
            {data.heroImage && (
              <img src={data.heroImage} alt={data.title} class="w-full h-44 object-cover rounded-xl mb-4" />
            )}
            <Title2>{data.title}</Title2>
            <Paragraph className="mt-2 text-heading-3">{data.description}</Paragraph>
            <div class="mt-3 text-sm opacity-70">{new Date(data.pubDate).toLocaleDateString()}</div>
          </a>
        ))}
      </div>
    </Container>
  </section>
</Layout>

